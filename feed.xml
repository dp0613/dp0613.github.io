<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>dev-web-with-me</title>
    <link href="http://devwebwithme.tk/feed.xml" rel="self" />
    <link href="http://devwebwithme.tk" />
    <updated>2017-10-02T23:12:27+07:00</updated>
    <author>
        <name>@dp0613</name>
    </author>
    <id>http://devwebwithme.tk</id>

    <entry>
        <title>switch case và if else: Liệu bạn có đang dùng búa để đóng tua vít?</title>
        <author>
            <name>@dp0613</name>
        </author>
        <link href="http://devwebwithme.tk/switch-va-if-else-if-khi-nao-va-o-dau-1506942139/"/>
        <id>http://devwebwithme.tk/switch-va-if-else-if-khi-nao-va-o-dau-1506942139/</id>
            <category term="Kinh nghiệm"/>

        <updated>2017-10-02T22:55:32+07:00</updated>
            <summary></summary>
        <content type="html">
            <![CDATA[
                    <img src="http://devwebwithme.tk/media/posts/5/confused-880735_1280.jpg" alt="" />
                <p>Nếu bạn l&agrave; một lập tr&igrave;nh vi&ecirc;n PHP th&igrave; t&ocirc;i c&oacute; niềm tin rằng bạn biết đến cấu tr&uacute;c <code>switch...case</code> v&agrave; <code>if... else</code>.</p>
<p>Trong b&agrave;i viết n&agrave;y t&ocirc;i sẽ cố gắng ph&acirc;n t&iacute;ch xem khi n&agrave;o th&igrave; ch&uacute;ng ta d&ugrave;ng <code>switch...case</code>, khi n&agrave;o th&igrave; d&ugrave;ng <code>if... else</code>.</p>
<p>Trước ti&ecirc;n, dưới đ&acirc;y l&agrave; đoạn code t&ocirc;i lấy từ blog FluffyCat.com, đoạn code n&agrave;y sẽ thử xem trong 100.000 lần lặp th&igrave; liệu <code>switch...case</code> hay <code>if...else&nbsp;</code>nhanh hơn...</p>
<pre><code class="language-php">
&lt;?php
	//copyright Lawrence Truett and FluffyCat.com 2009, all rights reserved
  	define('BR', '&lt;'.'BR'.'&gt;');
	echo 'Performance Testing PHP if / else VS switch with 100,000 iterations'.BR.BR;
	
	$ifTime = 0;
	$switchTime = 0;
	for ($x = 0; $x &lt; 100000; $x++) {
		$oneToFive = rand(1,5);
		if (0 == fmod($x,2)) {
			$switchTime = $switchTime + testSwitch($oneToFive);
			$ifTime = $ifTime + testIf($oneToFive);
		} else {
			$ifTime = $ifTime + testIf($oneToFive);  			
			$switchTime = $switchTime + testSwitch($oneToFive);  		
		}
	}
	echo 'total if / else time: '.$ifTime.BR;
	echo 'total case time: '.$switchTime.BR;
	echo BR;
	if ($ifTime &gt; $switchTime) {
		echo 'switch is quicker by '.($ifTime - $switchTime).BR;
	} else {
		echo 'if / else is quicker by '.($switchTime - $ifTime).BR;		
	}

	function testSwitch($oneToFive) {
		$time_start = microtime(true);
		switch($oneToFive) {
			case 1: $z = 1; break;
			case 2: $z = 2; break;
			case 3: $z = 3; break;
			case 4: $z = 4; break;
			case 5: $z = 5; break;						
		}
		$time_end = microtime(true);
		$time = $time_end - $time_start;
		return $time;
	}
  
	function testIf($oneToFive) {
		$time_start = microtime(true);
		if (1 == $oneToFive) {
			$z = 1;
		} elseif(2 == $oneToFive) {
			$z = 2;			
		} elseif(3 == $oneToFive) {
			$z = 3;	
		} elseif(4 == $oneToFive) {
			$z = 4;	
		} elseif(5 == $oneToFive) {
			$z = 5;	
		}
		$time_end = microtime(true);
		$time = $time_end - $time_start;
		return $time;
	}
?&gt;
</code></pre>
<blockquote>T&ocirc;i đ&atilde; chạy thử v&agrave;i lần v&agrave; kết quả l&agrave; <code>if...else</code> nhanh hơn.</blockquote>
<h4>Tới đ&acirc;y ta kết luận được điều g&igrave;?</h4>
<p>Nếu cấu tr&uacute;c <code>if</code> nhanh hơn th&igrave; PHP lại c&oacute; th&ecirc;m <code>switch</code> để l&agrave;m g&igrave;? Thử nghiệm l&agrave; thử nghiệm, c&aacute;i ch&iacute;nh ở đ&acirc;y, ch&uacute;ng ta sẽ x&eacute;t đến 3 vấn đề sau của 2 c&acirc;u lệnh n&agrave;y:</p>
<ol>
<li>C&aacute;ch 2 lệnh n&agrave;y vận h&agrave;nh</li>
<li>Khi n&agrave;o sử dụng lệnh n&agrave;o</li>
<li>Khi n&agrave;o kh&ocirc;ng n&ecirc;n sử dụng</li>
</ol>
<h4>&nbsp;C&aacute;ch 2 lệnh n&agrave;y vận h&agrave;nh</h4>
<p>Trang t&agrave;i liệu ch&iacute;nh thức của PHP (php.net) định nghĩa c&aacute;ch <code>switch...case</code> hoạt động như sau:</p>
<blockquote>It is important to understand how the <code>switch</code> statement is executed in order to avoid mistakes. The <code>switch</code> statement executes line by line (actually, statement by statement). In the beginning, no code is executed. Only when a <code>case</code> statement is found whose expression evaluates to a value that matches the value of the switch expression does PHP begin to execute the statements. PHP continues to execute the statements until the end of the switch block, or the first time it sees a <code>break</code> statement.</blockquote>
<p>&nbsp;Tạm dịch l&agrave;:&nbsp;</p>
<blockquote>Cấu tr&uacute;c <code>switch</code> thực thi từng d&ograve;ng một (từng c&acirc;u lệnh một). L&uacute;c mới bắt đầu, code kh&ocirc;ng được thực thi. Chỉ khi n&agrave;o thỏa m&atilde;n điều kiện được đưa ra trong mệnh đề <code>case</code> th&igrave; code ph&iacute;a trong mệnh đề đ&oacute; sẽ chạy. Cứ như vậy cho đến cuối c&ugrave;ng, hoặc khi n&agrave;o n&oacute; gặp lệnh <code>break</code>.</blockquote>
<p>Tiếp theo l&agrave; mệnh đề <code>if</code>:</p>
<blockquote>If expression evaluates to <code>TRUE</code>, PHP will execute statement, and if it evaluates to <code>FALSE</code> - it'll ignore it.</blockquote>
<p>Tạm dịch l&agrave;:</p>
<blockquote>Nếu điều kiện trả về gi&aacute; trị <code>TRUE</code>, PHP sẽ thực thi code ph&iacute;a trong mệnh đề <code>if</code>, nếu điều kiện trả về gi&aacute; trị <code>FALSE</code>, PHP sẽ bỏ qua code ph&iacute;a trong mệnh đề <code>if</code>.</blockquote>
<p>Khi n&agrave;o sử dụng lệnh n&agrave;o</p>
<p>&nbsp;</p>
<p>Khi n&agrave;o kh&ocirc;ng n&ecirc;n sử dụng</p>
            ]]>
        </content>
    </entry>
</feed>
